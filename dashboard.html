<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Dashboard Produ√ß√£o - Sequencial Moderno</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>

<style>
/* ======= SEU CSS ORIGINAL ‚Äì N√ÉO ALTERADO ======= */
body {
  margin:0;
  background:#0b1f2d;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color:#e1e7ee;
  padding:20px;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.container {
  background:#142b44;
  border-radius:12px;
  padding:30px;
  width:900px;
  box-shadow:0 0 30px rgba(0,0,0,0.5);
  position:relative;
  display:flex;
  flex-direction:column;
  gap:20px;
  user-select:none;
}
/* resto do CSS mantido */
</style>
</head>

<body>
<div class="container">
  <!-- HTML ORIGINAL MANTIDO -->
</div>

<script>
const dados = JSON.parse(localStorage.getItem("dadosProducao"));
if(!dados){
  alert("Nenhum dado encontrado. Preencha os dados primeiro.");
  window.location.href="dados.html";
}

let barChart, donutChart;

function atualizarGrafico(){
  const ctxBar = document.getElementById('barChart').getContext('2d');
  const ctxDonut = document.getElementById('donutChart').getContext('2d');
  const percentText = document.getElementById('percentText');

  const programado = dados.programado;
  const produzido = dados.produzido;
  const diferenca = Math.abs(produzido - programado);

  let percentual = programado > 0 ? Math.min(100,(produzido/programado)*100) : 0;

  if(barChart) barChart.destroy();
  if(donutChart) donutChart.destroy();

  /* ======= GR√ÅFICO DE BARRAS ‚Äì AJUSTE AQUI ======= */
  barChart = new Chart(ctxBar, {
    type:'bar',
    data:{
      labels:['','',''],
      datasets:[{
        data:[programado, produzido, diferenca],
        backgroundColor:['#26c6da','#90caf9','#fbc02d'],
        borderRadius:6,
        borderSkipped:false
      }]
    },
    options:{
      responsive:true,
      animation:{ duration:800 },
      plugins:{
        legend:{ display:false },
        tooltip:{ enabled:true },

        /* üî• NUMEROS CENTRALIZADOS NAS BARRAS üî• */
        datalabels:{
          display:true,
          color:'#0b1f2d',
          font:{
            weight:'bold',
            size:14
          },
          anchor:'center',
          align:'center',
          formatter:value => value.toLocaleString('pt-BR')
        }
      },
      scales:{
        y:{
          beginAtZero:true,
          ticks:{ color:'#e1e7ee', font:{ size:14 }},
          grid:{ color:'#16405a' }
        },
        x:{
          ticks:{ display:false },
          grid:{ display:false }
        }
      }
    },
    plugins:[ChartDataLabels]
  });

  /* ======= DONUT ORIGINAL ‚Äì N√ÉO ALTERADO ======= */
  donutChart = new Chart(ctxDonut,{
    type:'doughnut',
    data:{
      datasets:[{
        data:[percentual,100-percentual],
        backgroundColor:['#1de9b6','#144d56'],
        borderWidth:0
      }]
    },
    options:{
      cutout:'75%',
      plugins:{ legend:{ display:false }, tooltip:{ enabled:false } }
    }
  });
}

</script>
</body>
</html>
