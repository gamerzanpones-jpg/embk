<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Produção</title>

<style>
:root{
  --azul:#3b82f6;
  --rosa:#ec4899;
  --verde:#22c55e;
  --vermelho:#ef4444;
  --cinza:#64748b;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f2f5f9;
  padding:20px;
}

h1{
  text-align:center;
  color:var(--azul);
  margin-bottom:20px;
}

#dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:16px;
}

.card{
  background:#fff;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  padding:14px;
  text-align:center;
}

.dia{
  font-size:26px;
  font-weight:bold;
  color:var(--rosa);
  margin-bottom:10px;
}

.item{
  margin:6px 0;
  font-size:14px;
  color:var(--cinza);
}

.ok{ color:var(--verde); font-weight:bold; }
.fail{ color:var(--vermelho); font-weight:bold; }

.msg{
  text-align:center;
  color:#666;
}
</style>
</head>

<body>

<h1>Dashboard de Produção</h1>

<!-- Fallback HTML (SEMPRE APARECE) -->
<div id="dashboard">
  <div class="msg">Carregando dados...</div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

  let dados = []

  try{
    const salvo = localStorage.getItem("dadosProducao")
    if(salvo){
      dados = JSON.parse(salvo)
    }
  }catch(e){
    console.error("Erro ao ler dados:", e)
  }

  const dashboard = document.getElementById("dashboard")
  dashboard.innerHTML = ""

  if(!dados || dados.length === 0){
    dashboard.innerHTML = "<div class='msg'>Nenhum dado registrado</div>"
    return
  }

  dados.forEach(function(reg){
    if(!reg.dia) return

    const programado = Number(reg.programado) || 0
    const produzido = Number(reg.produzido) || 0
    const falta = programado - produzido

    const card = document.createElement("div")
    card.className = "card"

    card.innerHTML =
      "<div class='dia'>" + reg.dia + "</div>" +
      "<div class='item'>Base: " + programado + "</div>" +
      "<div class='item ok'>Produzido: " + produzido + "</div>" +
      "<div class='item " + (falta > 0 ? "fail" : "ok") + "'>" +
        "Falta: " + (falta > 0 ? falta : 0) +
      "</div>"

    dashboard.appendChild(card)
  })
})
</script>

</body>
</html>
